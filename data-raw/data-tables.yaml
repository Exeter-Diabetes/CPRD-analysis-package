naming:
  consultation: consultation
  drugIssue: drug_issue
  observation: observation
  patient: patient
  practice: practice
  problem: problem
  referral: referral
  staff: staff
  patidsWithLinkage: patids_with_linkage
  hesAcp: hes_acp
  hesCcare: hes_ccare
  hesDiagnosisEpi: hes_diagnosis_epi
  hesDiagnosisHosp: hes_diagnosis_hosp
  hesEpisodes: hes_episodes
  hesHospital: hes_hospital
  hesMaternity: hes_maternity
  hesPatient: hes_patient
  hesPrimaryDiagHosp: hes_primary_diag_hosp
  hesProceduresEpi: hes_procedures_epi
  onsDeath: ons_death
  patientImd: patient_imd
  practiceImd: practice_imd
  denominatorData: denominator_data
tables:
  consultation:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{consultation}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{consultation}
      (patid BIGINT UNSIGNED,
      consid BIGINT UNSIGNED NOT NULL,
      pracid MEDIUMINT,
      consdate DATE,
      enterdate DATE,
      staffid BIGINT,
      conssourceid BIGINT,
      cprdconstype SMALLINT,
      consmedcodeid BIGINT,
      PRIMARY KEY (consid))
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{consultation}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, consid, pracid, @orig_consdate, @orig_enterdate, @orig_staffid, @orig_conssourceid, @orig_cprdconstype, @orig_consmedcodeid)
      SET consdate = STR_TO_DATE(NULLIF(@orig_consdate,''),'%d/%m/%Y'),
      enterdate = STR_TO_DATE(@orig_enterdate,'%d/%m/%Y'),
      staffid = NULLIF(@orig_staffid,''),
      conssourceid = NULLIF(@orig_conssourceid,''),
      cprdconstype = NULLIF(@orig_cprdconstype,''),
      consmedcodeid = NULLIF(@orig_consmedcodeid,'')
  drugIssue:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{drugIssue}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{drugIssue}
      (patid BIGINT UNSIGNED,
      issueid BIGINT UNSIGNED,
      pracid MEDIUMINT,
      probobsid BIGINT UNSIGNED,
      drugrecid BIGINT UNSIGNED,
      issuedate DATE,
      enterdate DATE,
      staffid BIGINT,
      prodcodeid BIGINT,
      dosageid CHAR(64),
      quantity DECIMAL(9,3),
      quantunitid TINYINT,
      duration BIGINT,
      estnhscost DECIMAL(10,4),
      PRIMARY KEY (issueid))
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{drugIssue}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, issueid, pracid, @orig_probobsid, @orig_drugrecid, @orig_issuedate, @orig_enterdate, @orig_staffid, prodcodeid, dosageid, quantity, @orig_quantunitid, duration, estnhscost)
      SET probobsid = NULLIF(@orig_probobsid,''),
      drugrecid = NULLIF(@orig_drugrecid,''),
      issuedate = STR_TO_DATE(@orig_issuedate,'%d/%m/%Y'),
      enterdate = STR_TO_DATE(@orig_enterdate,'%d/%m/%Y'),
      staffid = NULLIF(@orig_staffid,''),
      quantunitid = NULLIF(@orig_quantunitid,'')
  observation:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{observation}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{observation}
      (patid BIGINT UNSIGNED,
      consid BIGINT UNSIGNED,
      pracid MEDIUMINT,
      obsid BIGINT UNSIGNED NOT NULL,
      obsdate DATE,
      enterdate DATE,
      staffid BIGINT,
      parentsobsid BIGINT UNSIGNED,
      medcodeid BIGINT,
      testvalue DECIMAL(19,3),
      numunitid BIGINT,
      obstypeid MEDIUMINT,
      numrangelow DECIMAL(19,3),
      numrangehigh DECIMAL(19,3),
      probobsid BIGINT UNSIGNED,
      PRIMARY KEY (obsid))
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{observation}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, @orig_consid, pracid, obsid, @orig_obsdate, @orig_enterdate, @orig_staffid, @orig_parentsobsid, @orig_medcodeid, @orig_testvalue, @orig_numunitid, obstypeid, @orig_numrangelow, @orig_numrangehigh, @orig_probobsid)
      SET consid = NULLIF(@orig_consid,''),
      obsdate = STR_TO_DATE(NULLIF(@orig_obsdate,''),'%d/%m/%Y'),
      enterdate = STR_TO_DATE(@orig_enterdate,'%d/%m/%Y'),
      staffid = NULLIF(@orig_staffid,''),
      parentsobsid = NULLIF(@orig_parentsobsid,''),
      medcodeid = NULLIF(@orig_medcodeid,''),
      testvalue = NULLIF(@orig_testvalue,''),
      numunitid = NULLIF(@orig_numunitid,''),
      numrangelow = NULLIF(@orig_numrangelow,''),
      numrangehigh = NULLIF(@orig_numrangehigh,''),
      probobsid = NULLIF(@orig_probobsid,'')
  patient:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{patient}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{patient}
      (patid BIGINT UNSIGNED,
      pracid MEDIUMINT,
      usualgpstaffid BIGINT,
      gender SMALLINT,
      yob SMALLINT,
      mob TINYINT,
      emis_ddate DATE,
      regstartdate DATE,
      patienttypeid MEDIUMINT,
      regenddate DATE,
      acceptable BOOL,
      cprd_ddate DATE,
      PRIMARY KEY (patid))
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{patient}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, pracid, @orig_usualgpstaffid, gender, yob, @orig_mob, @orig_emis_ddate, @orig_regstartdate, patienttypeid, @orig_regenddate, acceptable, @orig_cprd_ddate)
      SET usualgpstaffid = NULLIF(@orig_usualgpstaffid,''),
      mob = NULLIF(@orig_mob,''),
      emis_ddate = STR_TO_DATE(NULLIF(@orig_emis_ddate,''),'%d/%m/%Y'),
      regstartdate = STR_TO_DATE(@orig_regstartdate,'%d/%m/%Y'),
      regenddate = STR_TO_DATE(NULLIF(@orig_regenddate,''),'%d/%m/%Y'),
      cprd_ddate = STR_TO_DATE(NULLIF(@orig_cprd_ddate,''),'%d/%m/%Y')
  practice:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{practice}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{practice}
      (pracid MEDIUMINT,
      lcd DATE,
      uts DATE,
      region MEDIUMINT,
      PRIMARY KEY (pracid))
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{practice}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (pracid, @orig_lcd, @orig_uts, @orig_region)
      SET lcd = STR_TO_DATE(@orig_lcd,'%d/%m/%Y'),
      uts = STR_TO_DATE(NULLIF(@orig_uts,''),'%d/%m/%Y'),
      region = NULLIF(@orig_region,'')
  problem:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{problem}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{problem}
      (patid BIGINT UNSIGNED,
      obsid BIGINT UNSIGNED NOT NULL,
      pracid MEDIUMINT,
      parentprobobsid BIGINT UNSIGNED,
      probenddate DATE,
      expduration MEDIUMINT,
      lastrevdate DATE,
      lastrevstaffid VARCHAR(10),
      parentprobrelid MEDIUMINT,
      probstatusid MEDIUMINT,
      signid MEDIUMINT
      ) ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{problem}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, obsid, pracid, @orig_parentprobobsid, @orig_probenddate, @orig_expduration, @orig_lastrevdate, @orig_lastrevstaffid, @orig_parentprobrelid, @orig_probstatusid, @orig_signid)
      SET parentprobobsid = NULLIF(@orig_parentprobobsid,''),
      probenddate = STR_TO_DATE(NULLIF(@orig_probenddate,''),'%d/%m/%Y'),
      expduration = NULLIF(@orig_expduration,''),
      lastrevdate = STR_TO_DATE(NULLIF(@orig_lastrevdate,''),'%d/%m/%Y'),
      lastrevstaffid = NULLIF(@orig_lastrevstaffid,''),
      parentprobrelid = NULLIF(@orig_parentprobrelid,''),
      probstatusid = NULLIF(@orig_probstatusid,''),
      signid = NULLIF(@orig_signid,'')
  referral:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{referral}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{referral}
      (patid BIGINT UNSIGNED,
      obsid BIGINT UNSIGNED NOT NULL,
      pracid MEDIUMINT,
      refsourceorgid BIGINT,
      reftargetorgid BIGINT,
      refurgencyid TINYINT,
      refservicetypeid TINYINT,
      refmodeid TINYINT,
      PRIMARY KEY (obsid))
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{referral}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, obsid, pracid, @orig_refsourceorgid, @orig_reftargetorgid, @orig_refurgencyid, @orig_refservicetypeid, @orig_refmodeid)
      SET refsourceorgid = NULLIF(@orig_refsourceorgid,''),
      reftargetorgid = NULLIF(@orig_reftargetorgid,''),
      refurgencyid = NULLIF(@orig_refurgencyid,''),
      refservicetypeid = NULLIF(@orig_refservicetypeid,''),
      refmodeid = NULLIF(@orig_refmodeid,'')
  staff:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{staff}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{staff}
      (staffid BIGINT NOT NULL,
      pracid MEDIUMINT,
      jobcatid MEDIUMINT,
      PRIMARY KEY (staffid))
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{staff}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (staffid, pracid, @orig_jobcatid)
      SET jobcatid = NULLIF(@orig_jobcatid,'')
  patidsWithLinkage:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{patidsWithLinkage}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{patidsWithLinkage}
      (patid BIGINT UNSIGNED NOT NULL,
      PRIMARY KEY (patid))
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{patidsWithLinkage}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, @pracid, @linkdate, @hes_e, @death_e, @cr_e, @lsoa_e, @mh_e)
  hesPatient:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{hesPatient}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{hesPatient}
      (patid BIGINT UNSIGNED NOT NULL,
      pracid MEDIUMINT,
      cprd_mpsid BIGINT UNSIGNED,
      gen_ethnicity TINYINT,
      PRIMARY KEY (patid))
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{hesPatient}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, pracid, cprd_mpsid, @gen_ethnicity)
      SET gen_ethnicity = IF(@gen_ethnicity = 'White', 1,
      IF(@gen_ethnicity = 'Bl_Carib', 2,
      IF(@gen_ethnicity = 'Bl_Afric', 3,
      IF(@gen_ethnicity = 'Bl_Other', 4,
      IF(@gen_ethnicity = 'Indian', 5,
      IF(@gen_ethnicity = 'Pakistani', 6,
      IF(@gen_ethnicity = 'Bangladesi', 7,
      IF(@gen_ethnicity = 'Oth_Asian', 8,
      IF(@gen_ethnicity = 'Chinese', 9,
      IF(@gen_ethnicity = 'Mixed', 10,
      IF(@gen_ethnicity = 'Other', 11,
      IF(@gen_ethnicity = 'Unknown', NULL, NULL))))))))))))
  hesHospital:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{hesHospital}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{hesHospital}
      (patid BIGINT UNSIGNED NOT NULL,
      spno BIGINT UNSIGNED NOT NULL,
      admidate DATE,
      discharged DATE,
      admimeth CHAR(2),
      admisorc TINYINT,
      disdest TINYINT,
      dismeth TINYINT,
      duration MEDIUMINT,
      elecdate DATE,
      elecdur SMALLINT,
      PRIMARY KEY (patid, spno))
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{hesHospital}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, spno, @admidate, @discharged, admimeth, admisorc, disdest, dismeth, @duration, @elecdate, @elecdur)
      SET admidate = STR_TO_DATE(NULLIF(@admidate,''),'%Y/%m/%d'),
      discharged = STR_TO_DATE(NULLIF(@discharged,''),'%Y/%m/%d'),
      duration = NULLIF(@duration,''),
      elecdate = STR_TO_DATE(NULLIF(@elecdate,''),'%Y/%m/%d'),
      elecdur = NULLIF(@elecdur,'')
  hesMaternity:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{hesMaternity}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{hesMaternity}
      (patid BIGINT UNSIGNED NOT NULL,
      spno BIGINT UNSIGNED NOT NULL,
      epikey BIGINT UNSIGNED NOT NULL,
      epistart DATE,
      epiend DATE,
      eorder SMALLINT,
      epidur MEDIUMINT,
      numbaby CHAR(1),
      numtailb TINYINT,
      matordr TINYINT,
      neocare TINYINT,
      wellbaby CHAR(1),
      anasdate DATE,
      birordr CHAR(1),
      birstat TINYINT,
      biresus TINYINT,
      sexbaby TINYINT,
      birweit SMALLINT,
      delmeth CHAR(1),
      delonset TINYINT,
      delinten TINYINT,
      delplac TINYINT,
      delchang TINYINT,
      delprean TINYINT,
      delposan TINYINT,
      delstat TINYINT,
      anagest SMALLINT,
      gestat TINYINT,
      numpreg TINYINT,
      matage SMALLINT,
      neodur SMALLINT,
      antedur SMALLINT,
      postdur SMALLINT,
      primary_key INT PRIMARY KEY AUTO_INCREMENT)
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{hesMaternity}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, spno, epikey, @epistart, @epiend, @eorder, @epidur, numbaby, @numtailb, matordr, @neocare, wellbaby, @anasdate, birordr, @birstat, @biresus, @sexbaby, @birweit, @delmeth, delonset, delinten, @delplac, delchang, delprean, delposan, @delstat, @anagest, @gestat, @numpreg, @matage, @neodur, @antedur, @postdur)
      SET epistart = STR_TO_DATE(NULLIF(@epistart,''),'%Y/%m/%d'),
      epiend = STR_TO_DATE(NULLIF(@epiend,''),'%Y/%m/%d'),
      epidur = NULLIF(@epidur,''),
      numtailb = NULLIF(@numtailb,''),
      neocare = NULLIF(@neocare,''),
      anasdate = STR_TO_DATE(NULLIF(@anasdate,''),'%Y/%m/%d'),
      birstat = NULLIF(@birstat,''),
      biresus = NULLIF(@biresus,''),
      sexbaby = IF(@sexbaby = 'M' OR @sexbaby = '1', 1,
      IF(@sexbaby = 'F' OR @sexbaby = '2', 2,
      IF(@sexbaby = '3' OR @sexbaby = '9', 9, NULL))),
      birweit = IF(@birweit = '9999' OR @birweit = '', NULL, @birweit),
      delmeth = NULLIF(@delmeth,''),
      delplac = NULLIF(@delplac,''),
      delstat = NULLIF(@delstat,''),
      anagest = NULLIF(@anagest,''),
      gestat = NULLIF(@gestat,''),
      numpreg = NULLIF(@numpreg,''),
      matage = NULLIF(@matage,''),
      neodur = NULLIF(@neodur,''),
      antedur = NULLIF(@antedur,''),
      postdur = NULLIF(@postdur,'')
  hesEpisodes:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{hesEpisodes}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{hesEpisodes}
      (patid BIGINT UNSIGNED NOT NULL,
      spno BIGINT UNSIGNED,
      epikey BIGINT UNSIGNED NOT NULL,
      admidate DATE,
      epistart DATE,
      epiend DATE,
      discharged DATE,
      eorder SMALLINT,
      epidur MEDIUMINT,
      epitype TINYINT,
      admimeth CHAR(2),
      admisorc TINYINT,
      disdest TINYINT,
      dismeth TINYINT,
      mainspef CHAR(3),
      tretspef CHAR(3),
      pconsult CHAR(16),
      intmanig TINYINT,
      classpat TINYINT,
      firstreg TINYINT,
      ethnos TINYINT,
      PRIMARY KEY (patid, epikey))
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{hesEpisodes}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, spno, epikey, @admidate, @epistart, @epiend, @discharged, eorder, @epidur, epitype, admimeth, @admisorc, @disdest, dismeth, @mainspef, @tretspef, @pconsult, @intmanig, classpat, @firstreg, @ethnos)
      SET admidate = STR_TO_DATE(NULLIF(@admidate,''),'%Y/%m/%d'),
      epistart = STR_TO_DATE(NULLIF(@epistart,''),'%Y/%m/%d'),
      epiend = STR_TO_DATE(NULLIF(@epiend,''),'%Y/%m/%d'),
      discharged = STR_TO_DATE(NULLIF(@discharged,''),'%Y/%m/%d'),
      epidur = NULLIF(@epidur,''),
      admisorc = NULLIF(@admisorc,''),
      disdest = NULLIF(@disdest,''),
      tretspef = NULLIF(NULLIF(@tretspef,''),'000'),
      mainspef = NULLIF(@mainspef,''),
      pconsult = IF(@pconsult='&' OR @pconsult='99',NULL,@pconsult),
      intmanig = NULLIF(@intmanig,''),
      firstreg = NULLIF(@firstreg,''),
      ethnos = IF(@ethnos = 'White', 1,
      IF(@ethnos = 'Bl_Carib', 2,
      IF(@ethnos = 'Bl_Afric', 3,
      IF(@ethnos = 'Bl_Other', 4,
      IF(@ethnos = 'Indian', 5,
      IF(@ethnos = 'Pakistani', 6,
      IF(@ethnos = 'Bangladesi', 7,
      IF(@ethnos = 'Oth_Asian', 8,
      IF(@ethnos = 'Chinese', 9,
      IF(@ethnos = 'Mixed', 10,
      IF(@ethnos = 'Other', 11,
      IF(@ethnos = 'Unknown', NULL, NULL))))))))))))
  hesDiagnosisEpi:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{hesDiagnosisEpi}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{hesDiagnosisEpi}
      (patid BIGINT UNSIGNED NOT NULL,
      spno BIGINT UNSIGNED,
      epikey BIGINT UNSIGNED NOT NULL,
      epistart DATE,
      epiend DATE,
      ICD CHAR(5),
      ICDx CHAR(2),
      d_order TINYINT NOT NULL,
      PRIMARY KEY (patid, epikey, d_order))
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{hesDiagnosisEpi}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, spno, epikey, @epistart, @epiend, @ICD, @ICDx, d_order)
      SET epistart = STR_TO_DATE(NULLIF(@epistart,''),'%Y/%m/%d'),
      epiend = STR_TO_DATE(NULLIF(@epiend,''),'%Y/%m/%d'),
      ICD = NULLIF(@ICD,'-.'),
      ICDx = NULLIF(@ICDx,'')
  hesDiagnosisHosp:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{hesDiagnosisHosp}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{hesDiagnosisHosp}
      (patid BIGINT UNSIGNED,
      spno BIGINT UNSIGNED,
      admidate DATE,
      discharged DATE,
      ICD CHAR(5),
      ICDx CHAR(2),
      primary_key INT PRIMARY KEY AUTO_INCREMENT)
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{hesDiagnosisHosp}
      FIELDS TERMINATED BY '\t' ESCAPED BY '\\'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, spno, @admidate, @discharged, @ICD, @ICDx)
      SET admidate = STR_TO_DATE(NULLIF(@admidate,''),'%Y/%m/%d'),
      discharged = STR_TO_DATE(NULLIF(@discharged,''),'%Y/%m/%d'),
      ICD = NULLIF(@ICD,'-.'),
      ICDx = NULLIF(@ICDx,'')
  hesPrimaryDiagHosp:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{hesPrimaryDiagHosp}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{hesPrimaryDiagHosp}
      (patid BIGINT UNSIGNED,
      spno BIGINT UNSIGNED,
      admidate DATE,
      discharged DATE,
      ICD_PRIMARY CHAR(5),
      ICDx CHAR(2),
      primary_key INT PRIMARY KEY AUTO_INCREMENT)
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{hesPrimaryDiagHosp}
      FIELDS TERMINATED BY '\t' ESCAPED BY '\\'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, spno, @admidate, @discharged, ICD_PRIMARY, @ICDx)
      SET admidate = STR_TO_DATE(NULLIF(@admidate,''),'%Y/%m/%d'),
      discharged = STR_TO_DATE(NULLIF(@discharged,''),'%Y/%m/%d'),
      ICDx = NULLIF(@ICDx,'')
  hesProceduresEpi:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{hesProceduresEpi}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{hesProceduresEpi}
      (patid BIGINT UNSIGNED NOT NULL,
      spno BIGINT UNSIGNED,
      epikey BIGINT UNSIGNED NOT NULL,
      admidate DATE,
      epistart DATE,
      epiend DATE,
      discharged DATE,
      OPCS CHAR(4),
      evdate DATE,
      p_order TINYINT NOT NULL,
      PRIMARY KEY (patid, epikey, p_order))
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{hesProceduresEpi}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, spno, epikey, @admidate, @epistart, @epiend, @discharged, @OPCS, @evdate, p_order)
      SET admidate = STR_TO_DATE(NULLIF(@admidate,''),'%Y/%m/%d'),
      epistart = STR_TO_DATE(NULLIF(@epistart,''),'%Y/%m/%d'),
      epiend = STR_TO_DATE(NULLIF(@epiend,''),'%Y/%m/%d'),
      discharged = STR_TO_DATE(NULLIF(@discharged,''),'%Y/%m/%d'),
      OPCS=NULLIF(NULLIF(@OPCS,''), '&'),
      evdate = STR_TO_DATE(NULLIF(@evdate,''),'%Y/%m/%d')
  hesAcp:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{hesAcp}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{hesAcp}
      (patid BIGINT UNSIGNED,
      spno BIGINT UNSIGNED,
      epikey BIGINT UNSIGNED,
      epistart DATE,
      epiend DATE,
      eorder TINYINT,
      epidur SMALLINT,
      numacp TINYINT,
      acpn TINYINT,
      acpstar DATE,
      acpend DATE,
      acpdur SMALLINT,
      intdays SMALLINT,
      depdays SMALLINT,
      acploc TINYINT,
      acpsour TINYINT,
      acpdisp TINYINT,
      acpout TINYINT,
      acpplan TINYINT,
      acpspef CHAR(3),
      orgsup TINYINT,
      acpdqind CHAR(1),
      primary_key INT PRIMARY KEY AUTO_INCREMENT)
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{hesAcp}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, spno, epikey, @epistart, @epiend, eorder, @epidur, numacp, @acpn, @acpstar, @acpend, @acpdur, @intdays, @depdays, @acploc, @acpsour, @acpdisp, @acpout, @acpplan, @acpspef, @orgsup, @acpdqind)
      SET epistart = STR_TO_DATE(@epistart,'%d/%m/%Y'),
      epiend = STR_TO_DATE(NULLIF(@epiend,''),'%d/%m/%Y'),
      epidur = NULLIF(@epidur,''),
      acpn = IF(@acpn='' OR acpn='99',NULL,@acpn),
      acpstar = STR_TO_DATE(NULLIF(@acpstar,''),'%d/%m/%Y'),
      acpend = STR_TO_DATE(NULLIF(@acpend,''),'%d/%m/%Y'),
      acpdur = NULLIF(@acpdur,''),
      intdays = NULLIF(@intdays,''),
      depdays = NULLIF(@depdays,''),
      acploc = NULLIF(@acploc,''),
      acpsour = IF(@acpsour='' OR @acpsour='0',NULL,@acpsour),
      acpdisp = IF(@acpdisp='' OR @acpdisp='0',NULL,@acpdisp),
      acpout = IF(@acpout='' OR @acpout='0',NULL,@acpout),
      acpplan = IF(@acpplan='Y',1,IF(@acpplan='N',2,IF(@acpplan='',NULL,@acpplan))),
      acpspef = IF(@acpspef='' OR @acpspef='0',NULL,@acpspef),
      orgsup = NULLIF(@orgsup,''),
      acpdqind = NULLIF(@acpdqind,'')
  hesCcare:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{hesCcare}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{hesCcare}
      (patid BIGINT UNSIGNED,
      spno BIGINT UNSIGNED,
      epikey BIGINT UNSIGNED,
      admidate DATE,
      discharged DATE,
      epistart DATE,
      epiend DATE,
      eorder TINYINT,
      ccstartdate DATE,
      ccstarttime TIME,
      ccdisrdydate DATE,
      ccdisrdytime TIME,
      ccdisdate DATE,
      ccdistime TIME,
      ccadmitype TINYINT,
      ccadmisorc TINYINT,
      ccsorcloc TINYINT,
      ccdisstat TINYINT,
      ccdisdest TINYINT,
      ccdisloc TINYINT,
      cclev2days SMALLINT,
      cclev3days SMALLINT,
      bcardsupdays SMALLINT,
      acardsupdays SMALLINT,
      bressupdays SMALLINT,
      aressupdays SMALLINT,
      gisupdays SMALLINT,
      liversupdays SMALLINT,
      neurosupdays SMALLINT,
      rensupdays SMALLINT,
      dermsupdays SMALLINT,
      orgsupmax TINYINT,
      ccunitfun TINYINT,
      unitbedconfig TINYINT,
      bestmatch BOOL DEFAULT NULL,
      ccapcrel TINYINT,
      primary_key INT PRIMARY KEY AUTO_INCREMENT)
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{hesCcare}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, spno, epikey, @admidate, @discharged, @epistart, @epiend, eorder, @ccstartdate, @ccstarttime, @ccdisrdydate, @ccdisrdytime, @ccdisdate, @ccdistime, @ccadmitype, @ccadmisorc, @ccsorcloc, @ccdisstat, @ccdisdest, @ccdisloc, @cclev2days, @cclev3days, @bcardsupdays, @acardsupdays, @bressupdays, @aressupdays, @gisupdays, @liversupdays, @neurosupdays, @rensupdays, @dermsupdays, @orgsupmax, @ccunitfun, @unitbedconfig, @bestmatch, ccapcrel)
      SET admidate = STR_TO_DATE(@admidate,'%Y/%m/%d'),
      discharged = STR_TO_DATE(NULLIF(@discharged,''),'%Y/%m/%d'),
      epistart = STR_TO_DATE(@epistart,'%Y/%m/%d'),
      epiend = STR_TO_DATE(@epiend,'%Y/%m/%d'),
      ccstartdate = STR_TO_DATE(@ccstartdate,'%Y/%m/%d'),
      ccstarttime = NULLIF(@ccstarttime,''),
      ccdisrdydate = STR_TO_DATE(NULLIF(@ccdisrdydate,''),'%Y/%m/%d'),
      ccdisrdytime = NULLIF(@ccdisrdytime,''),
      ccdisdate = STR_TO_DATE(@ccdisdate,'%Y/%m/%d'),
      ccdistime = NULLIF(@ccdistime,''),
      ccadmitype = NULLIF(NULLIF(@ccadmitype,''), 'NU'),
      ccadmisorc = NULLIF(@ccadmisorc,''),
      ccsorcloc = NULLIF(@ccsorcloc,''),
      ccdisstat = NULLIF(@ccdisstat,''),
      ccdisdest = NULLIF(@ccdisdest,''),
      ccdisloc = NULLIF(@ccdisloc,''),
      cclev2days = IF(@cclev2days='' OR @cclev2days='999',NULL,@cclev2days),
      cclev3days = IF(@cclev3days='' OR @cclev3days='999',NULL,@cclev3days),
      bcardsupdays = IF(@bcardsupdays='' OR @bcardsupdays='999',NULL,@bcardsupdays),
      acardsupdays = IF(@acardsupdays='' OR @acardsupdays='999',NULL,@acardsupdays),
      bressupdays = IF(@bressupdays='' OR @bressupdays='999',NULL,@bressupdays),
      aressupdays = IF(@aressupdays='' OR @aressupdays='999',NULL,@aressupdays),
      gisupdays = IF(@gisupdays='' OR @gisupdays='999',NULL,@gisupdays),
      liversupdays = IF(@liversupdays='' OR @liversupdays='999',NULL,@liversupdays),
      neurosupdays = IF(@neurosupdays='' OR @neurosupdays='999',NULL,@neurosupdays),
      rensupdays = IF(@rensupdays='' OR @rensupdays='999',NULL,@rensupdays),
      dermsupdays = IF(@dermsupdays='' OR @dermsupdays='999',NULL,@dermsupdays),
      orgsupmax = NULLIF(@orgsupmax,''),
      ccunitfun = NULLIF(@ccunitfun,''),
      unitbedconfig = NULLIF(@unitbedconfig,''),
      bestmatch = NULLIF(@bestmatch,'')
  patientImd:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{patientImd}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{patientImd}
      (patid BIGINT UNSIGNED NOT NULL,
      pracid MEDIUMINT,
      imd_decile TINYINT,
      PRIMARY KEY (patid))
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{patientImd}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, pracid, @imd_decile)
      SET imd_decile = NULLIF(@imd_decile,'')
  practiceImd:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{practiceImd}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{practiceImd}
      (pracid MEDIUMINT NOT NULL,
      country VARCHAR(9),
      e2015_imd_10 TINYINT,
      ni2017_imd_10 TINYINT,
      s2016_imd_10 TINYINT,
      w2014_imd_10 TINYINT,
      PRIMARY KEY (pracid))
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{practiceImd}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (pracid, country, @e2015_imd_10, @ni2017_imd_10, @s2016_imd_10, @w2014_imd_10)
      SET e2015_imd_10 = NULLIF(@e2015_imd_10,''),
      ni2017_imd_10 = NULLIF(@ni2017_imd_10,''),
      s2016_imd_10 = NULLIF(@s2016_imd_10,''),
      w2014_imd_10 = NULLIF(@w2014_imd_10,'')
  onsDeath:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{onsDeath}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{onsDeath}
      (patid BIGINT UNSIGNED NOT NULL,
      pracid MEDIUMINT,
      gen_death_id BIGINT UNSIGNED,
      n_patid_death SMALLINT,
      match_rank TINYINT,
      dor DATE,
      dod DATE,
      dod_partial SMALLINT,
      nhs_indicator TINYINT,
      pod_category VARCHAR(21),
      cause VARCHAR(5),
      cause1 VARCHAR(5),
      cause2 VARCHAR(5),
      cause3 VARCHAR(5),
      cause4 VARCHAR(5),
      cause5 VARCHAR(5),
      cause6 VARCHAR(5),
      cause7 VARCHAR(5),
      cause8 VARCHAR(5),
      cause9 VARCHAR(5),
      cause10 VARCHAR(5),
      cause11 VARCHAR(5),
      cause12 VARCHAR(5),
      cause13 VARCHAR(5),
      cause14 VARCHAR(5),
      cause15 VARCHAR(5),
      PRIMARY KEY (patid))
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{onsDeath}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, pracid, gen_death_id, n_patid_death, match_rank, @dor, @dod, @dod_partial, nhs_indicator, @pod_category, @cause, @cause1, @cause2, @cause3, @cause4, @cause5, @cause6, @cause7, @cause8, @cause9, @cause10, @cause11, @cause12, @cause13, @cause14, @cause15)
      SET dor = STR_TO_DATE(@dor,'%d/%m/%Y'),
      dod = STR_TO_DATE(NULLIF(@dod,''),'%d/%m/%Y'),
      dod_partial = IF(@dod_partial='' OR @dod_partial='--',NULL,SUBSTR(@dod_partial,1,4)),
      pod_category = NULLIF(@pod_category,''),
      cause = NULLIF(@cause,''),
      cause1 = NULLIF(@cause1,''),
      cause2 = NULLIF(@cause2,''),
      cause3 = NULLIF(@cause3,''),
      cause4 = NULLIF(@cause4,''),
      cause5 = NULLIF(@cause5,''),
      cause6 = NULLIF(@cause6,''),
      cause7 = NULLIF(@cause7,''),
      cause8 = NULLIF(@cause8,''),
      cause9 = NULLIF(@cause9,''),
      cause10 = NULLIF(@cause10,''),
      cause11 = NULLIF(@cause11,''),
      cause12 = NULLIF(@cause12,''),
      cause13 = NULLIF(@cause13,''),
      cause14 = NULLIF(@cause14,''),
      cause15 = NULLIF(@cause15,'')
  denominatorData:
    drop: |
      DROP TABLE IF EXISTS {dataDb}.{denominatorData}
    create: |
      CREATE TABLE IF NOT EXISTS {dataDb}.{denominatorData}
      (patid BIGINT UNSIGNED NOT NULL,
      pracid MEDIUMINT,
      gender SMALLINT,
      yob SMALLINT,
      mob TINYINT,
      emis_ddate DATE,
      regstartdate DATE,
      patienttypeid MEDIUMINT,
      regenddate DATE,
      acceptable BOOL,
      cprd_ddate DATE,
      uts DATE,
      lcd DATE,
      region MEDIUMINT,
      PRIMARY KEY (patid))
      ENGINE=MYISAM
      CHARSET=latin1 COLLATE=latin1_general_ci
    load: |
      LOAD DATA INFILE '{path}' IGNORE
      INTO TABLE {dataDb}.{denominatorData}
      FIELDS TERMINATED BY '\t'
      LINES TERMINATED BY '\r\n'
      IGNORE 1 LINES
      (patid, pracid, gender, yob, @orig_mob, @orig_emis_ddate, @orig_regstartdate, patienttypeid, @orig_regenddate, acceptable, @orig_cprd_ddate, @orig_uts, @orig_lcd, @orig_region)
      SET mob = NULLIF(@orig_mob,''),
      emis_ddate = STR_TO_DATE(NULLIF(@orig_emis_ddate,''),'%d/%m/%Y'),
      regstartdate = STR_TO_DATE(@orig_regstartdate,'%d/%m/%Y'),
      regenddate = STR_TO_DATE(NULLIF(@orig_regenddate,''),'%d/%m/%Y'),
      cprd_ddate = STR_TO_DATE(NULLIF(@orig_cprd_ddate,''),'%d/%m/%Y'),
      uts = STR_TO_DATE(NULLIF(@orig_uts,''),'%d/%m/%Y'),
      lcd = STR_TO_DATE(@orig_lcd,'%d/%m/%Y'),
      region = NULLIF(@orig_region,'')
indexes:
  # Primary care data
  # patid
  - CREATE INDEX x_{consultation}_patid ON {dataDb}.{consultation} (patid);
  - CREATE INDEX x_{drugIssue}_patid ON {dataDb}.{drugIssue} (patid);
  - CREATE INDEX x_{observation}_patid ON {dataDb}.{observation} (patid);
  - CREATE INDEX x_{problem}_patid ON {dataDb}.{problem} (patid);
  - CREATE INDEX x_{referral}_patid ON {dataDb}.{referral} (patid);
  # obsid / problemid
  - CREATE INDEX x_{observation}_parentobsid ON {dataDb}.{observation} (parentsobsid);
  - CREATE INDEX x_{problem}_parentprobobsid ON {dataDb}.{problem} (parentprobobsid);
  - CREATE INDEX x_{drugIssue}_probobsid ON {dataDb}.{drugIssue} (probobsid);
  - CREATE INDEX x_{observation}_probobsid ON {dataDb}.{observation} (probobsid);
  # pracid
  - CREATE INDEX x_{consultation}_pracid ON {dataDb}.{consultation} (pracid);
  - CREATE INDEX x_{drugIssue}_pracid ON {dataDb}.{drugIssue} (pracid);
  - CREATE INDEX x_{observation}_pracid ON {dataDb}.{observation} (pracid);
  - CREATE INDEX x_{patient}_pracid ON {dataDb}.{patient} (pracid);
  - CREATE INDEX x_{problem}_pracid ON {dataDb}.{problem} (pracid);
  - CREATE INDEX x_{referral}_pracid ON {dataDb}.{referral} (pracid);
  - CREATE INDEX x_{staff}_pracid ON {dataDb}.{staff} (pracid);
  - CREATE INDEX x_{denominatorData}_pracid ON {dataDb}.{denominatorData} (pracid);
  # dates
  - CREATE INDEX x_{consultation}_consdate ON {dataDb}.{consultation} (consdate);
  - CREATE INDEX x_{drugIssue}_issuedate ON {dataDb}.{drugIssue} (issuedate);
  - CREATE INDEX x_{observation}_obsdate ON {dataDb}.{observation} (obsdate);
  - CREATE INDEX x_{patient}_dob ON {dataDb}.{patient} (yob,mob);
  - CREATE INDEX x_{patient}_cprd_ddate ON {dataDb}.{patient} (cprd_ddate);
  - CREATE INDEX x_{patient}_emis_ddate ON {dataDb}.{patient} (emis_ddate);
  - CREATE INDEX x_{patient}_regenddate ON {dataDb}.{patient} (regenddate);
  - CREATE INDEX x_{patient}_regstartdate ON {dataDb}.{patient} (regstartdate);
  - CREATE INDEX x_{practice}_lcd ON {dataDb}.{practice} (lcd);
  - CREATE INDEX x_{problem}_probenddate ON {dataDb}.{problem} (probenddate);
  - CREATE INDEX x_{denominatorData}_dob ON {dataDb}.{denominatorData} (yob,mob);
  - CREATE INDEX x_{denominatorData}_cprd_ddate ON {dataDb}.{denominatorData} (cprd_ddate);
  - CREATE INDEX x_{denominatorData}_emis_ddate ON {dataDb}.{denominatorData} (emis_ddate);
  - CREATE INDEX x_{denominatorData}_regenddate ON {dataDb}.{denominatorData} (regenddate);
  - CREATE INDEX x_{denominatorData}_regstartdate ON {dataDb}.{denominatorData} (regstartdate);
  - CREATE INDEX x_{denominatorData}_lcd ON {dataDb}.{denominatorData} (lcd);
  # medCodes / prodCodes and associated
  - CREATE INDEX x_{consultation}_consmedcodeid ON {dataDb}.{consultation} (consmedcodeid);
  - CREATE INDEX x_{drugIssue}_prodcodeid ON {dataDb}.{drugIssue} (prodcodeid);
  - CREATE INDEX x_{drugIssue}_dosageid ON {dataDb}.{drugIssue} (dosageid);
  - CREATE INDEX x_{drugIssue}_quantunitid ON {dataDb}.{drugIssue} (quantunitid);
  - CREATE INDEX x_{observation}_medcodeid ON {dataDb}.{observation} (medcodeid);
  - CREATE INDEX x_{observation}_numunitid ON {dataDb}.{observation} (numunitid);
  - CREATE INDEX x_{patient}_patienttypeid ON {dataDb}.{patient} (patienttypeid);
  - CREATE INDEX x_{problem}_probstatusid ON {dataDb}.{problem} (probstatusid);
  - CREATE INDEX x_{referral}_refservicetypeid ON {dataDb}.{referral} (refservicetypeid);
  - CREATE INDEX x_{denominatorData}_patienttypeid ON {dataDb}.{denominatorData} (patienttypeid);
  # staffid
  - CREATE INDEX x_{consultation}_staffid ON {dataDb}.{consultation} (staffid);
  - CREATE INDEX x_{drugIssue}_staffid ON {dataDb}.{drugIssue} (staffid);
  - CREATE INDEX x_{observation}_staffid ON {dataDb}.{observation} (staffid);
  - CREATE INDEX x_{patient}_usualgpstaffid ON {dataDb}.{patient} (usualgpstaffid);
  - CREATE INDEX x_{problem}_lastrevstaffid ON {dataDb}.{problem} (lastrevstaffid);
  # other fields with lookups/used in definitions
  - CREATE INDEX x_{consultation}_conssourceid ON {dataDb}.{consultation} (conssourceid);
  - CREATE INDEX x_{observation}_obstypeid ON {dataDb}.{observation} (obstypeid);
  - CREATE INDEX x_{patient}_gender ON {dataDb}.{patient} (gender);
  - CREATE INDEX x_{patient}_acceptable ON {dataDb}.{patient} (acceptable);
  - CREATE INDEX x_{practice}_region ON {dataDb}.{practice} (region);
  - CREATE INDEX x_{problem}_parentprobrelid ON {dataDb}.{problem} (parentprobrelid);
  - CREATE INDEX x_{problem}_signid ON {dataDb}.{problem} (signid);
  - CREATE INDEX x_{referral}_refsourceorgid ON {dataDb}.{referral} (refsourceorgid);
  - CREATE INDEX x_{referral}_reftargetorgid ON {dataDb}.{referral} (reftargetorgid);
  - CREATE INDEX x_{referral}_refurgencyid ON {dataDb}.{referral} (refurgencyid);
  - CREATE INDEX x_{referral}_refmodeid ON {dataDb}.{referral} (refmodeid);
  - CREATE INDEX x_{staff}_jobcatid ON {dataDb}.{staff} (jobcatid);
  - CREATE INDEX x_{denominatorData}_gender ON {dataDb}.{denominatorData} (gender);
  - CREATE INDEX x_{denominatorData}_region ON {dataDb}.{denominatorData} (region);
  # Linkage data (index all fields)
  # hesPatient
  - CREATE INDEX x_{hesPatient}_pracid ON {dataDb}.{hesPatient} (pracid);
  - CREATE INDEX x_{hesPatient}_cprd_mpsid ON {dataDb}.{hesPatient} (cprd_mpsid);
  - CREATE INDEX x_{hesPatient}_gen_ethnicity ON {dataDb}.{hesPatient} (gen_ethnicity);
  # hesHospital
  - CREATE INDEX x_{hesHospital}_patid ON {dataDb}.{hesHospital} (patid);
  - CREATE INDEX x_{hesHospital}_spno ON {dataDb}.{hesHospital} (spno);
  - CREATE INDEX x_{hesHospital}_admidate ON {dataDb}.{hesHospital} (admidate);
  - CREATE INDEX x_{hesHospital}_discharged ON {dataDb}.{hesHospital} (discharged);
  - CREATE INDEX x_{hesHospital}_admimeth ON {dataDb}.{hesHospital} (admimeth);
  - CREATE INDEX x_{hesHospital}_admisorc ON {dataDb}.{hesHospital} (admisorc);
  - CREATE INDEX x_{hesHospital}_disdest ON {dataDb}.{hesHospital} (disdest);
  - CREATE INDEX x_{hesHospital}_dismeth ON {dataDb}.{hesHospital} (dismeth);
  - CREATE INDEX x_{hesHospital}_duration ON {dataDb}.{hesHospital} (duration);
  - CREATE INDEX x_{hesHospital}_elecdate ON {dataDb}.{hesHospital} (elecdate);
  - CREATE INDEX x_{hesHospital}_elecdur ON {dataDb}.{hesHospital} (elecdur);
  #hesMaternity
  - CREATE INDEX x_{hesMaternity}_patid ON {dataDb}.{hesMaternity} (patid);
  - CREATE INDEX x_{hesMaternity}_spno ON {dataDb}.{hesMaternity} (spno);
  - CREATE INDEX x_{hesMaternity}_epikey ON {dataDb}.{hesMaternity} (epikey);
  - CREATE INDEX x_{hesMaternity}_epistart ON {dataDb}.{hesMaternity} (epistart);
  - CREATE INDEX x_{hesMaternity}_epiend ON {dataDb}.{hesMaternity} (epiend);
  - CREATE INDEX x_{hesMaternity}_eorder ON {dataDb}.{hesMaternity} (eorder);
  - CREATE INDEX x_{hesMaternity}_epidur ON {dataDb}.{hesMaternity} (epidur);
  - CREATE INDEX x_{hesMaternity}_numbaby ON {dataDb}.{hesMaternity} (numbaby);
  - CREATE INDEX x_{hesMaternity}_numtailb ON {dataDb}.{hesMaternity} (numtailb);
  - CREATE INDEX x_{hesMaternity}_matordr ON {dataDb}.{hesMaternity} (matordr);
  - CREATE INDEX x_{hesMaternity}_neocare ON {dataDb}.{hesMaternity} (neocare);
  - CREATE INDEX x_{hesMaternity}_wellbaby ON {dataDb}.{hesMaternity} (wellbaby);
  - CREATE INDEX x_{hesMaternity}_anasdate ON {dataDb}.{hesMaternity} (anasdate);
  - CREATE INDEX x_{hesMaternity}_birordr ON {dataDb}.{hesMaternity} (birordr);
  - CREATE INDEX x_{hesMaternity}_birstat ON {dataDb}.{hesMaternity} (birstat);
  - CREATE INDEX x_{hesMaternity}_biresus ON {dataDb}.{hesMaternity} (biresus);
  - CREATE INDEX x_{hesMaternity}_sexbaby ON {dataDb}.{hesMaternity} (sexbaby);
  - CREATE INDEX x_{hesMaternity}_birweit ON {dataDb}.{hesMaternity} (birweit);
  - CREATE INDEX x_{hesMaternity}_delmeth ON {dataDb}.{hesMaternity} (delmeth);
  - CREATE INDEX x_{hesMaternity}_delonset ON {dataDb}.{hesMaternity} (delonset);
  - CREATE INDEX x_{hesMaternity}_delinten ON {dataDb}.{hesMaternity} (delinten);
  - CREATE INDEX x_{hesMaternity}_delplac ON {dataDb}.{hesMaternity} (delplac);
  - CREATE INDEX x_{hesMaternity}_delchang ON {dataDb}.{hesMaternity} (delchang);
  - CREATE INDEX x_{hesMaternity}_delprean ON {dataDb}.{hesMaternity} (delprean);
  - CREATE INDEX x_{hesMaternity}_delposan ON {dataDb}.{hesMaternity} (delposan);
  - CREATE INDEX x_{hesMaternity}_delstat ON {dataDb}.{hesMaternity} (delstat);
  - CREATE INDEX x_{hesMaternity}_anagest ON {dataDb}.{hesMaternity} (anagest);
  - CREATE INDEX x_{hesMaternity}_gestat ON {dataDb}.{hesMaternity} (gestat);
  - CREATE INDEX x_{hesMaternity}_numpreg ON {dataDb}.{hesMaternity} (numpreg);
  - CREATE INDEX x_{hesMaternity}_matage ON {dataDb}.{hesMaternity} (matage);
  - CREATE INDEX x_{hesMaternity}_neodur ON {dataDb}.{hesMaternity} (neodur);
  - CREATE INDEX x_{hesMaternity}_antedur ON {dataDb}.{hesMaternity} (antedur);
  - CREATE INDEX x_{hesMaternity}_postdur ON {dataDb}.{hesMaternity} (postdur);
  # hesEpisodes
  - CREATE INDEX x_{hesEpisodes}_patid ON {dataDb}.{hesEpisodes} (patid);
  - CREATE INDEX x_{hesEpisodes}_spno ON {dataDb}.{hesEpisodes} (spno);
  - CREATE INDEX x_{hesEpisodes}_epikey ON {dataDb}.{hesEpisodes} (epikey);
  - CREATE INDEX x_{hesEpisodes}_admidate ON {dataDb}.{hesEpisodes} (admidate);
  - CREATE INDEX x_{hesEpisodes}_epistart ON {dataDb}.{hesEpisodes} (epistart);
  - CREATE INDEX x_{hesEpisodes}_epiend ON {dataDb}.{hesEpisodes} (epiend);
  - CREATE INDEX x_{hesEpisodes}_discharged ON {dataDb}.{hesEpisodes} (discharged);
  - CREATE INDEX x_{hesEpisodes}_eorder ON {dataDb}.{hesEpisodes} (eorder);
  - CREATE INDEX x_{hesEpisodes}_epidur ON {dataDb}.{hesEpisodes} (epidur);
  - CREATE INDEX x_{hesEpisodes}_epitype ON {dataDb}.{hesEpisodes} (epitype);
  - CREATE INDEX x_{hesEpisodes}_admimeth ON {dataDb}.{hesEpisodes} (admimeth);
  - CREATE INDEX x_{hesEpisodes}_admisorc ON {dataDb}.{hesEpisodes} (admisorc);
  - CREATE INDEX x_{hesEpisodes}_disdest ON {dataDb}.{hesEpisodes} (disdest);
  - CREATE INDEX x_{hesEpisodes}_dismeth ON {dataDb}.{hesEpisodes} (dismeth);
  - CREATE INDEX x_{hesEpisodes}_mainspef ON {dataDb}.{hesEpisodes} (mainspef);
  - CREATE INDEX x_{hesEpisodes}_tretspef ON {dataDb}.{hesEpisodes} (tretspef);
  - CREATE INDEX x_{hesEpisodes}_pconsult ON {dataDb}.{hesEpisodes} (pconsult);
  - CREATE INDEX x_{hesEpisodes}_intmanig ON {dataDb}.{hesEpisodes} (intmanig);
  - CREATE INDEX x_{hesEpisodes}_classpat ON {dataDb}.{hesEpisodes} (classpat);
  - CREATE INDEX x_{hesEpisodes}_firstreg ON {dataDb}.{hesEpisodes} (firstreg);
  - CREATE INDEX x_{hesEpisodes}_ethnos ON {dataDb}.{hesEpisodes} (ethnos);
  # hesDiagnosisEpi
  - CREATE INDEX x_{hesDiagnosisEpi}_patid ON {dataDb}.{hesDiagnosisEpi} (patid);
  - CREATE INDEX x_{hesDiagnosisEpi}_spno ON {dataDb}.{hesDiagnosisEpi} (spno);
  - CREATE INDEX x_{hesDiagnosisEpi}_epikey ON {dataDb}.{hesDiagnosisEpi} (epikey);
  - CREATE INDEX x_{hesDiagnosisEpi}_epistart ON {dataDb}.{hesDiagnosisEpi} (epistart);
  - CREATE INDEX x_{hesDiagnosisEpi}_epiend ON {dataDb}.{hesDiagnosisEpi} (epiend);
  - CREATE INDEX x_{hesDiagnosisEpi}_ICD ON {dataDb}.{hesDiagnosisEpi} (ICD);
  - CREATE INDEX x_{hesDiagnosisEpi}_ICDx ON {dataDb}.{hesDiagnosisEpi} (ICDx);
  - CREATE INDEX x_{hesDiagnosisEpi}_d_order ON {dataDb}.{hesDiagnosisEpi} (d_order);
  # hesDiagnosisHosp
  - CREATE INDEX x_{hesDiagnosisHosp}_patid ON {dataDb}.{hesDiagnosisHosp} (patid);
  - CREATE INDEX x_{hesDiagnosisHosp}_spno ON {dataDb}.{hesDiagnosisHosp} (spno);
  - CREATE INDEX x_{hesDiagnosisHosp}_admidate ON {dataDb}.{hesDiagnosisHosp} (admidate);
  - CREATE INDEX x_{hesDiagnosisHosp}_discharged ON {dataDb}.{hesDiagnosisHosp} (discharged);
  - CREATE INDEX x_{hesDiagnosisHosp}_ICD ON {dataDb}.{hesDiagnosisHosp} (ICD);
  - CREATE INDEX x_{hesDiagnosisHosp}_ICDx ON {dataDb}.{hesDiagnosisHosp} (ICDx);
  # hesPrimaryDiagHosp
  - CREATE INDEX x_{hesPrimaryDiagHosp}_patid ON {dataDb}.{hesPrimaryDiagHosp} (patid);
  - CREATE INDEX x_{hesPrimaryDiagHosp}_spno ON {dataDb}.{hesPrimaryDiagHosp} (spno);
  - CREATE INDEX x_{hesPrimaryDiagHosp}_admidate ON {dataDb}.{hesPrimaryDiagHosp} (admidate);
  - CREATE INDEX x_{hesPrimaryDiagHosp}_discharged ON {dataDb}.{hesPrimaryDiagHosp} (discharged);
  - CREATE INDEX x_{hesPrimaryDiagHosp}_ICD_PRIMARY ON {dataDb}.{hesPrimaryDiagHosp} (ICD_PRIMARY);
  - CREATE INDEX x_{hesPrimaryDiagHosp}_ICDx ON {dataDb}.{hesPrimaryDiagHosp} (ICDx);
  # hesProceduresEpi
  - CREATE INDEX x_{hesProceduresEpi}_patid ON {dataDb}.{hesProceduresEpi} (patid);
  - CREATE INDEX x_{hesProceduresEpi}_spno ON {dataDb}.{hesProceduresEpi} (spno);
  - CREATE INDEX x_{hesProceduresEpi}_epikey ON {dataDb}.{hesProceduresEpi} (epikey);
  - CREATE INDEX x_{hesProceduresEpi}_admidate ON {dataDb}.{hesProceduresEpi} (admidate);
  - CREATE INDEX x_{hesProceduresEpi}_epistart ON {dataDb}.{hesProceduresEpi} (epistart);
  - CREATE INDEX x_{hesProceduresEpi}_epiend ON {dataDb}.{hesProceduresEpi} (epiend);
  - CREATE INDEX x_{hesProceduresEpi}_discharged ON {dataDb}.{hesProceduresEpi} (discharged);
  - CREATE INDEX x_{hesProceduresEpi}_OPCS ON {dataDb}.{hesProceduresEpi} (OPCS);
  - CREATE INDEX x_{hesProceduresEpi}_evdate ON {dataDb}.{hesProceduresEpi} (evdate);
  - CREATE INDEX x_{hesProceduresEpi}_p_order ON {dataDb}.{hesProceduresEpi} (p_order);
  # hesAcp
  - CREATE INDEX x_{hesAcp}_patid ON {dataDb}.{hesAcp} (patid);
  - CREATE INDEX x_{hesAcp}_spno ON {dataDb}.{hesAcp} (spno);
  - CREATE INDEX x_{hesAcp}_epikey ON {dataDb}.{hesAcp} (epikey);
  - CREATE INDEX x_{hesAcp}_epistart ON {dataDb}.{hesAcp} (epistart);
  - CREATE INDEX x_{hesAcp}_epiend ON {dataDb}.{hesAcp} (epiend);
  - CREATE INDEX x_{hesAcp}_eorder ON {dataDb}.{hesAcp} (eorder);
  - CREATE INDEX x_{hesAcp}_epidur ON {dataDb}.{hesAcp} (epidur);
  - CREATE INDEX x_{hesAcp}_numacp ON {dataDb}.{hesAcp} (numacp);
  - CREATE INDEX x_{hesAcp}_acpn ON {dataDb}.{hesAcp} (acpn);
  - CREATE INDEX x_{hesAcp}_acpstar ON {dataDb}.{hesAcp} (acpstar);
  - CREATE INDEX x_{hesAcp}_acpend ON {dataDb}.{hesAcp} (acpend);
  - CREATE INDEX x_{hesAcp}_acpdur ON {dataDb}.{hesAcp} (acpdur);
  - CREATE INDEX x_{hesAcp}_intdays ON {dataDb}.{hesAcp} (intdays);
  - CREATE INDEX x_{hesAcp}_depdays ON {dataDb}.{hesAcp} (depdays);
  - CREATE INDEX x_{hesAcp}_acploc ON {dataDb}.{hesAcp} (acploc);
  - CREATE INDEX x_{hesAcp}_acpsour ON {dataDb}.{hesAcp} (acpsour);
  - CREATE INDEX x_{hesAcp}_acpdisp ON {dataDb}.{hesAcp} (acpdisp);
  - CREATE INDEX x_{hesAcp}_acpout ON {dataDb}.{hesAcp} (acpout);
  - CREATE INDEX x_{hesAcp}_acpplan ON {dataDb}.{hesAcp} (acpplan);
  - CREATE INDEX x_{hesAcp}_acpspef ON {dataDb}.{hesAcp} (acpspef);
  - CREATE INDEX x_{hesAcp}_orgsup ON {dataDb}.{hesAcp} (orgsup);
  - CREATE INDEX x_{hesAcp}_acpdqind ON {dataDb}.{hesAcp} (acpdqind);
  # hesCcare
  - CREATE INDEX x_{hesCcare}_patid ON {dataDb}.{hesCcare} (patid);
  - CREATE INDEX x_{hesCcare}_spno ON {dataDb}.{hesCcare} (spno);
  - CREATE INDEX x_{hesCcare}_epikey ON {dataDb}.{hesCcare} (epikey);
  - CREATE INDEX x_{hesCcare}_admidate ON {dataDb}.{hesCcare} (admidate);
  - CREATE INDEX x_{hesCcare}_discharged ON {dataDb}.{hesCcare} (discharged);
  - CREATE INDEX x_{hesCcare}_epistart ON {dataDb}.{hesCcare} (epistart);
  - CREATE INDEX x_{hesCcare}_epiend ON {dataDb}.{hesCcare} (epiend);
  - CREATE INDEX x_{hesCcare}_eorder ON {dataDb}.{hesCcare} (eorder);
  - CREATE INDEX x_{hesCcare}_ccstartdate ON {dataDb}.{hesCcare} (ccstartdate);
  - CREATE INDEX x_{hesCcare}_ccstarttime ON {dataDb}.{hesCcare} (ccstarttime);
  - CREATE INDEX x_{hesCcare}_ccdisrdydate ON {dataDb}.{hesCcare} (ccdisrdydate);
  - CREATE INDEX x_{hesCcare}_ccdisrdytime ON {dataDb}.{hesCcare} (ccdisrdytime);
  - CREATE INDEX x_{hesCcare}_ccdisdate ON {dataDb}.{hesCcare} (ccdisdate);
  - CREATE INDEX x_{hesCcare}_ccdistime ON {dataDb}.{hesCcare} (ccdistime);
  - CREATE INDEX x_{hesCcare}_ccadmitype ON {dataDb}.{hesCcare} (ccadmitype);
  - CREATE INDEX x_{hesCcare}_ccadmisorc ON {dataDb}.{hesCcare} (ccadmisorc);
  - CREATE INDEX x_{hesCcare}_ccsorcloc ON {dataDb}.{hesCcare} (ccsorcloc);
  - CREATE INDEX x_{hesCcare}_ccdisstat ON {dataDb}.{hesCcare} (ccdisstat);
  - CREATE INDEX x_{hesCcare}_ccdisdest ON {dataDb}.{hesCcare} (ccdisdest);
  - CREATE INDEX x_{hesCcare}_ccdisloc ON {dataDb}.{hesCcare} (ccdisloc);
  - CREATE INDEX x_{hesCcare}_cclev2days ON {dataDb}.{hesCcare} (cclev2days);
  - CREATE INDEX x_{hesCcare}_cclev3days ON {dataDb}.{hesCcare} (cclev3days);
  - CREATE INDEX x_{hesCcare}_bcardsupdays ON {dataDb}.{hesCcare} (bcardsupdays);
  - CREATE INDEX x_{hesCcare}_acardsupdays ON {dataDb}.{hesCcare} (acardsupdays);
  - CREATE INDEX x_{hesCcare}_bressupdays ON {dataDb}.{hesCcare} (bressupdays);
  - CREATE INDEX x_{hesCcare}_aressupdays ON {dataDb}.{hesCcare} (aressupdays);
  - CREATE INDEX x_{hesCcare}_gisupdays ON {dataDb}.{hesCcare} (gisupdays);
  - CREATE INDEX x_{hesCcare}_liversupdays ON {dataDb}.{hesCcare} (liversupdays);
  - CREATE INDEX x_{hesCcare}_neurosupdays ON {dataDb}.{hesCcare} (neurosupdays);
  - CREATE INDEX x_{hesCcare}_rensupdays ON {dataDb}.{hesCcare} (rensupdays);
  - CREATE INDEX x_{hesCcare}_dermsupdays ON {dataDb}.{hesCcare} (dermsupdays);
  - CREATE INDEX x_{hesCcare}_orgsupmax ON {dataDb}.{hesCcare} (orgsupmax);
  - CREATE INDEX x_{hesCcare}_ccunitfun ON {dataDb}.{hesCcare} (ccunitfun);
  - CREATE INDEX x_{hesCcare}_unitbedconfig ON {dataDb}.{hesCcare} (unitbedconfig);
  - CREATE INDEX x_{hesCcare}_bestmatch ON {dataDb}.{hesCcare} (bestmatch);
  - CREATE INDEX x_{hesCcare}_ccapcrel ON {dataDb}.{hesCcare} (ccapcrel);
  # patientImd
  - CREATE INDEX x_{patientImd}_pracid ON {dataDb}.{patientImd} (pracid);
  - CREATE INDEX x_{patientImd}_imd_decile ON {dataDb}.{patientImd} (imd_decile);
  # practiceImd
  - CREATE INDEX x_{practiceImd}_country ON {dataDb}.{practiceImd} (country);
  - CREATE INDEX x_{practiceImd}_e2015_imd_10 ON {dataDb}.{practiceImd} (e2015_imd_10);
  - CREATE INDEX x_{practiceImd}_ni2017_imd_10 ON {dataDb}.{practiceImd} (ni2017_imd_10);
  - CREATE INDEX x_{practiceImd}_s2016_imd_10 ON {dataDb}.{practiceImd} (s2016_imd_10);
  - CREATE INDEX x_{practiceImd}_w2014_imd_10 ON {dataDb}.{practiceImd} (w2014_imd_10);
  # onsDeath
  - CREATE INDEX x_{onsDeath}_pracid ON {dataDb}.{onsDeath} (pracid);
  - CREATE INDEX x_{onsDeath}_gen_death_id ON {dataDb}.{onsDeath} (gen_death_id);
  - CREATE INDEX x_{onsDeath}_n_patid_death ON {dataDb}.{onsDeath} (n_patid_death);
  - CREATE INDEX x_{onsDeath}_match_rank ON {dataDb}.{onsDeath} (match_rank);
  - CREATE INDEX x_{onsDeath}_dor ON {dataDb}.{onsDeath} (dor);
  - CREATE INDEX x_{onsDeath}_dod ON {dataDb}.{onsDeath} (dod);
  - CREATE INDEX x_{onsDeath}_dod_partial ON {dataDb}.{onsDeath} (dod_partial);
  - CREATE INDEX x_{onsDeath}_nhs_indicator ON {dataDb}.{onsDeath} (nhs_indicator);
  - CREATE INDEX x_{onsDeath}_pod_category ON {dataDb}.{onsDeath} (pod_category);
  - CREATE INDEX x_{onsDeath}_cause ON {dataDb}.{onsDeath} (cause);
  - CREATE INDEX x_{onsDeath}_cause1 ON {dataDb}.{onsDeath} (cause1);
  - CREATE INDEX x_{onsDeath}_cause2 ON {dataDb}.{onsDeath} (cause2);
  - CREATE INDEX x_{onsDeath}_cause3 ON {dataDb}.{onsDeath} (cause3);
  - CREATE INDEX x_{onsDeath}_cause4 ON {dataDb}.{onsDeath} (cause4);
  - CREATE INDEX x_{onsDeath}_cause5 ON {dataDb}.{onsDeath} (cause5);
  - CREATE INDEX x_{onsDeath}_cause6 ON {dataDb}.{onsDeath} (cause6);
  - CREATE INDEX x_{onsDeath}_cause7 ON {dataDb}.{onsDeath} (cause7);
  - CREATE INDEX x_{onsDeath}_cause8 ON {dataDb}.{onsDeath} (cause8);
  - CREATE INDEX x_{onsDeath}_cause9 ON {dataDb}.{onsDeath} (cause9);
  - CREATE INDEX x_{onsDeath}_cause10 ON {dataDb}.{onsDeath} (cause10);
  - CREATE INDEX x_{onsDeath}_cause11 ON {dataDb}.{onsDeath} (cause11);
  - CREATE INDEX x_{onsDeath}_cause12 ON {dataDb}.{onsDeath} (cause12);
  - CREATE INDEX x_{onsDeath}_cause13 ON {dataDb}.{onsDeath} (cause13);
  - CREATE INDEX x_{onsDeath}_cause14 ON {dataDb}.{onsDeath} (cause14);
  - CREATE INDEX x_{onsDeath}_cause15 ON {dataDb}.{onsDeath} (cause15);
